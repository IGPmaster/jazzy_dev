import{z as e,P as a}from"./server.mjs";import{b as t,w as s}from"../routes/renderer.mjs";const i=t(!1),n=t({necessary:!0,analytics:!0,affiliate:!0}),r=t(!1),o=t(!1);function useCookieConsent(){const l=i,c=r,u=t(null),f=t(""),d=t(""),v=t(""),y=n,updateLobbyLinks=t=>{const s=new URLSearchParams(window.location.search),i=s.get("btag"),n=s.get("affid");let r=s.get("tracker");r||(r=t||e("affiliateTracker"));let o=[];r&&o.push(`tracker=${r}`),i&&o.push(`btag=${i}`),n&&o.push(`affid=${n}`);const l=o.join("&"),c=l?`?${l}`:"";f.value=`${a}${c}#registration`,d.value=`${a}${c}#login`,v.value=`${a}${c}#play/`},saveToLocalStorage=a=>{if(!o.value)return;a.analytics,localStorage.setItem("cookieConsent",JSON.stringify({preferences:a,timestamp:(new Date).toISOString(),version:"1.0"}));const t=u.value;if(t)(e=>{if(!e)return void updateLobbyLinks(null);const a=new Date;a.setDate(a.getDate()+30),document.cookie=`affiliateTracker=${e}; max-age=2592000; path=/; SameSite=Strict; Secure`,updateLobbyLinks(e)})(t);else{const a=e("affiliateTracker");updateLobbyLinks(a)}a.analytics};return s(y,(e=>{}),{deep:!0}),{showBanner:l,isPreferencesOpen:c,preferences:y,cookieCategories:[{id:"necessary",label:"Necessary Cookies",description:"Essential for website functionality. These cookies are required and cannot be disabled.",required:!0},{id:"analytics",label:"Analytics Cookies",description:"Help us understand how visitors interact with our website. These cookies collect anonymous information.",required:!1},{id:"affiliate",label:"Affiliate Tracking",description:"Essential for our business operations. We use a unique identifier stored for 30 days to credit our partners when you visit gaming sites. No personal data is collected.",required:!0}],handleAcceptAll:()=>{o.value=!0;const e={necessary:!0,analytics:!0,affiliate:!0};y.value=e,saveToLocalStorage(e),l.value=!1},handleDeclineAll:()=>{o.value=!0;const e={necessary:!0,analytics:!1,affiliate:!0};y.value=e,saveToLocalStorage(e),l.value=!1},savePreferences:()=>{o.value=!0;const e={...y.value,necessary:!0,affiliate:!0};y.value=e,saveToLocalStorage(e),l.value=!1,c.value=!1},handleOpenPreferences:()=>{if(c.value=!0,localStorage.getItem("cookieConsent"))try{const{preferences:e}=JSON.parse(localStorage.getItem("cookieConsent"));y.value={...e,necessary:!0,affiliate:!0}}catch(e){y.value={necessary:!0,analytics:!0,affiliate:!0}}else y.value={necessary:!0,analytics:!0,affiliate:!0}},withdrawConsent:()=>{localStorage.removeItem("cookieConsent"),y.value={necessary:!0,analytics:!1,affiliate:!0},updateLobbyLinks(null),l.value=!0},getConsentStatus:()=>{const e=localStorage.getItem("cookieConsent");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},regLink:f,loginLink:d,playLink:v}}export{useCookieConsent as u};
//# sourceMappingURL=useCookieConsent-268eebe9.mjs.map
