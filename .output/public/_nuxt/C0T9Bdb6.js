import{r as l,f as I,aC as f,a2 as E,aD as m}from"./CEVuiMLZ.js";const W=l(!1),A=l({necessary:!0,analytics:!0,affiliate:!0}),N=l(!1),c=l(!1);function q(){const r=W,h=N,T=l(null),y=l(""),v=l(""),S=l(""),n=A,C=[{id:"necessary",label:"Necessary Cookies",description:"Essential for website functionality. These cookies are required and cannot be disabled.",required:!0},{id:"analytics",label:"Analytics Cookies",description:"Help us understand how visitors interact with our website. These cookies collect anonymous information.",required:!1},{id:"affiliate",label:"Affiliate Tracking",description:"Essential for our business operations. We use a unique identifier stored for 30 days to credit our partners when you visit gaming sites. No personal data is collected.",required:!0}],u=()=>typeof window>"u"?null:new URLSearchParams(window.location.search).get("tracker"),s=a=>{const t=new URLSearchParams(window.location.search),o=t.get("btag"),e=t.get("affid");let i=t.get("tracker");i||(i=a||f("affiliateTracker"));let p=[];i&&p.push(`tracker=${i}`),o&&p.push(`btag=${o}`),e&&p.push(`affid=${e}`);const $=p.join("&"),k=$?`?${$}`:"";y.value=`${m}${k}#registration`,v.value=`${m}${k}#login`,S.value=`${m}${k}#play/`},d=a=>{if(!a){s(null);return}document.cookie=`affiliateTracker=${a}; max-age=${30*24*60*60}; path=/; SameSite=Lax; Secure; domain=${window.location.hostname}`,s(a);try{localStorage.setItem("affiliateTracker_backup",a)}catch(t){console.warn("Failed to set localStorage backup for affiliate tracker:",t)}},g=a=>{if(typeof window>"u")return;const t=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;if((t==="1"||t==="yes")&&(a=!1),a)window.dataLayer&&(window.dataLayer.push({event:"consent_update",analytics_storage:"granted",ad_storage:"granted",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"}),c.value&&window.initializeGTM&&(window.initializeGTM(),window.dataLayer.push({event:"pageview",page_path:window.location.pathname,page_title:document.title})));else{if(document.cookie.split(";").map(e=>e.split("=")[0].trim()).filter(e=>e.startsWith("_ga")||e.startsWith("_gid")||e.startsWith("_gat")||e.startsWith("_dc_gtm")).forEach(e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`}),Object.keys(localStorage).forEach(e=>{(e.startsWith("_ga")||e.startsWith("ga:"))&&localStorage.removeItem(e)}),delete window.ga,delete window.google_tag_manager,delete window.google_tag_data,delete window._gaq,delete window.gaData,delete window.gaGlobal,window.dataLayer){const e=window.dataLayer[0];window.dataLayer=[e]}localStorage.removeItem("gtm_initialized")}},b=()=>{if(typeof document>"u")return;const a=["PHPSESSID","affiliateTracker"];document.cookie.split(";").forEach(e=>{const i=e.split("=")[0].trim();a.includes(i)||(document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`)}),document.cookie.split(";").map(e=>e.split("=")[0].trim()).filter(e=>e.startsWith("_ga")||e.startsWith("_gid")||e.startsWith("_gat")||e.startsWith("_dc_gtm")).forEach(e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`})},w=a=>{if(!c.value)return;a.analytics||b(),localStorage.setItem("cookieConsent",JSON.stringify({preferences:a,timestamp:new Date().toISOString(),version:"1.0"}));const o=u()||T.value;if(o)d(o);else{const e=f("affiliateTracker");s(e)}g(a.analytics)},L=()=>{c.value=!0;const a={necessary:!0,analytics:!0,affiliate:!0};n.value=a,w(a),g(!0),r.value=!1},_=()=>{if(typeof window>"u")return;const a=["PHPSESSID","affiliateTracker"];document.cookie.split(";").forEach(e=>{const i=e.split("=")[0].trim();a.includes(i)||(document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`)});const o=["cookieConsent"];if(Object.keys(localStorage).forEach(e=>{o.includes(e)||localStorage.removeItem(e)}),sessionStorage.clear(),window.dataLayer){const e=window.dataLayer[0];window.dataLayer=[e]}delete window.ga,delete window.google_tag_manager,delete window.google_tag_data,delete window._gaq,delete window.gaData,delete window.gaGlobal},x=()=>{c.value=!0;const a={necessary:!0,analytics:!1,affiliate:!0};n.value=a,_(),w(a),r.value=!1},G=()=>{c.value=!0;const a={...n.value,necessary:!0,affiliate:!0};n.value=a,w(a),r.value=!1,h.value=!1},P=()=>{if(h.value=!0,!localStorage.getItem("cookieConsent"))n.value={necessary:!0,analytics:!0,affiliate:!0};else try{const{preferences:a}=JSON.parse(localStorage.getItem("cookieConsent"));n.value={...a,necessary:!0,affiliate:!0}}catch{n.value={necessary:!0,analytics:!0,affiliate:!0}}},M=()=>{const a=localStorage.getItem("cookieConsent");if(!a)return null;try{return JSON.parse(a)}catch{return null}},J=()=>{_(),localStorage.removeItem("cookieConsent"),n.value={necessary:!0,analytics:!1,affiliate:!0},s(null),r.value=!0};return I(()=>{const a=localStorage.getItem("cookieConsent");if(a)try{const{preferences:t}=JSON.parse(a);c.value=!0,n.value={...t,necessary:!0,affiliate:!0};const o=u();if(o)d(o);else{const e=f("affiliateTracker");e&&s(e)}g(t.analytics),r.value=!1}catch(t){console.error("Error parsing saved consent:",t),c.value=!1,n.value={necessary:!0,analytics:!0,affiliate:!0},r.value=!0;const o=u();o&&d(o)}else{c.value=!1,n.value={necessary:!0,analytics:!0,affiliate:!0};const t=u();if(t)d(t);else{const o=f("affiliateTracker");o&&s(o)}r.value=!0}}),E(n,a=>{if(!(typeof window>"u"))if(w(a),g(a.analytics),a.affiliate){const o=u()||T.value;if(o)d(o);else{const e=f("affiliateTracker");s(e)}}else s(null)},{deep:!0}),{showBanner:r,isPreferencesOpen:h,preferences:n,cookieCategories:C,handleAcceptAll:L,handleDeclineAll:x,savePreferences:G,handleOpenPreferences:P,withdrawConsent:J,getConsentStatus:M,regLink:y,loginLink:v,playLink:S}}export{q as u};
